<div class="property-view-wrapper">
  <div class="scroll-container">
    <div class="loader" *ngIf="loading"></div>
    <ng-container *ngIf="!loading">
      <main class="property-sheet" >
        <header class="sheet-header">
          <button class="btn-back-circle" routerLink="/solicitudes-estudiante">
            <i class="fa-solid fa-arrow-left"></i>
          </button>
          <div class="header-info">
            <h1>{{ info.titulo }}</h1>
            <span class="location-badge"
              ><i class="fa-solid fa-location-dot"></i> {{ info.direccion }}</span
            >
          </div>
          <div class="header-actions" *ngIf="edit">
            <button class="btn-icon-action edit"><i class="fa-solid fa-pen"></i></button>
            <button class="btn-icon-action delete"><i class="fa-solid fa-trash"></i></button>
          </div>
        </header>

        <section class="hero-gallery">
          <div class="main-img">
            <img
              src="https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=800"
              alt="Sal√≥n"
            />
          </div>
          <div class="sub-imgs">
            <img
              src="https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=400"
              alt="Detalle 1"
            />
            <img
              src="https://images.unsplash.com/photo-1493809842364-78817add7ffb?w=400"
              alt="Detalle 2"
            />
            <img
              src="https://images.unsplash.com/photo-1493809842364-78817add7ffb?w=400"
              alt="Detalle 3"
            />
            <img
              src="https://images.unsplash.com/photo-1493809842364-78817add7ffb?w=400"
              alt="Detalle 4"
            />
          </div>
        </section>

        <div class="content-layout">
          <aside class="details-column">
            <div class="features-row">
              <div class="feature-badge">
                <i class="fa-solid fa-bed"></i> <span> {{ info.habitaciones }} Hab</span>
              </div>
              <div class="feature-badge">
                <i class="fa-solid fa-bath"></i> <span>{{ info.banios }} Ba√±os</span>
              </div>
              <div class="feature-badge">
                <i class="fa-solid fa-ruler-combined"></i> <span>{{ info.metros }} m¬≤</span>
              </div>
              <div class="feature-badge">
                <i class="fa-solid fa-person"></i> <span>{{ info.n_personas }}</span>
              </div>
            </div>

            <div class="section-divider"></div>
            <div class="inm-content">
              <div class="inm-info">
                <div class="info-block">
                  <h3>Cerca de:</h3>
                  <div class="feature-badge highlight" style="width: 450px">
                    <i class="fa-solid fa-graduation-cap"></i>
                    <span>{{ info.nombre_universidad }}</span>
                  </div>
                </div>
                <div class="info-block">
                  <h3>Descripcion</h3>
                  <p class="desc-text">{{ info.descripcion }}</p>
                </div>
                <div class="info-block">
                  <h3>Normas de la casa</h3>
                  <div class="rules-grid">
                    <div class="rule-card">
                      <div class="icon">üö´</div>
                      <span>No fumar</span>
                    </div>
                    <div class="rule-card">
                      <div class="icon">üê∂</div>
                      <span>No mascotas</span>
                    </div>
                  </div>
                </div>

                <div class="info-block">
                  <h3>Compa√±eros de piso actuales</h3>
                  <div class="tenants-list">
                    <div
                      class="tenant-item"
                      *ngFor="let mt of matches"
                      [routerLink]="'/perfil/' + mt.estudiante_id"
                    >
                      <img src="https://i.pravatar.cc/150?img=33" alt="Inquilino" />
                      <span class="tenant-name">Inquilino</span>
                    </div>
                    <div class="tenant-item empty">
                      <div class="empty-circle"><i class="fa-solid fa-plus"></i></div>
                      <span class="tenant-name">Libre</span>
                    </div>
                  </div>
                </div>
              </div>
              <section class="candidates-column">
                <div class="likes-panel">
                  <div class="panel-header">
                    <h3>Interesados ({{ solicitudes.length }})</h3>
                    <p>Personas que han dado Like al piso</p>
                  </div>

                  <div class="candidates-scroll">
                    <div class="candidate-row" *ngFor="let sol of solicitudes">
                      <div class="candidate-avatar" [routerLink]="'/perfil/' + sol.estudiante_id">
                        <img src="https://i.pravatar.cc/150?img=68" alt="User" />
                      </div>
                      <div class="candidate-info">
                        <span class="name">{{ sol.nombre_solicitante }}</span>
                      </div>
                      <div class="candidate-actions" *ngIf="!edit">
                        <button class="action-btn reject"><i class="fa-solid fa-xmark"></i></button>
                        <button class="action-btn accept"><i class="fa-solid fa-heart"></i></button>
                      </div>
                    </div>

                    <div class="no-likes" *ngIf="solicitudes.length === 0">
                      <i class="fa-regular fa-heart"></i>
                      <p>A√∫n no tienes nuevos likes</p>
                    </div>
                  </div>
                </div>
              </section>
            </div>
          </aside>
        </div>
      </main></ng-container
    >
  </div>
</div>
